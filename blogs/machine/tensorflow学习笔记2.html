<!DOCTYPE html>
<html lang="cn" dir="ltr" class="no-js">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="maximum-scale=1.0,width=device-width,initial-scale=1.0,user-scalable=no">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>山风之行 </title>
    <link href="../../assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../../assets/css/style.css" rel="stylesheet" />
    <link href="../../assets/css/nprogress.css" rel="stylesheet" />
    <link rel="stylesheet" href="../../assets/css/nivo-slider.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" media="screen" />
    <script src="../../assets/js/jquery.min.js"></script>
    <script src="../../assets/js/jquery.nivo.slider.pack.js"></script>
    <script src="../../assets/js/nprogress.js"></script>
</head>

<body>
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">
              Toggle navigation
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
            </button>
            <a class="navbar-brand" href="../../index.html">
                <img src="../../assets/img/logo.png" class="logo"/>
            </a>
        </div>
        <div class="collapse navbar-collapse " id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav header-menu">
                <li>
                    <a href="../../index.html">
                        首页
                    </a>
                </li>
                <li>
                    <a href="../../about.html">
                        关于
                    </a>
                </li>
                <li>
                    <a href="../../blog.html">
                        博客
                    </a>
                </li>
                
                <li>
                    <a href="../../works.html">
                        作品
                    </a>
                </li>

                <li>
                    <a href="../../contact.html">
                        联系
                    </a>
                </li>
               
            </ul>
        </div>
    </div>
</nav>
<!--Start banner img-->
<div class="container-filed" id="banner_container">
    <div class="row">
        <div class="col-md-12">
            <div class="slider-wrapper theme-default">
                <div id="slider" class="nivoSlider">
                    <img src="../../assets/img/owl.jpg" data-thumb="../../assets/img/owl.jpg" alt="" />
                    <a href="../../assets/img/owl2.jpg"><img src="../../assets/img/owl2.jpg" alt="" /></a>
                    <img src="../../assets/img/owl.jpg" data-thumb="../../assets/img/owl.jpg" alt="" />
                    <img src="../../assets/img/owl2.jpg" data-thumb="../../assets/img/owl2.jpg" alt="" />
                </div>
            </div>
        </div>
    </div>
</div>
<!--End banner img-->
<div class="container-fluid main-container" id="main-container">
    <div class="row top-title">
        <div class="col-md-12">
            <h1 class="page-title right">
                <a href="../../blog.html">博客</a> >> <a>tensorflow 学习笔记（2）</a>
            </h1>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 post-container">
           <h2>tensorflow学习笔记（2）</h2>

<h3>2018.4.22</h3>

<p>上期我们说到tensorflow分两步，Graph和run。在公司用tensorflow搭了下lstm做分类的模型，结果很奇怪。同样的模型结构，我用Keras跑出来auc为0.7,而用tensorflow时loss一直跳，而且auc基本在0.5左右。然后在排错过程中，我想到了graph，把graph打出来后，发现了几个问题，如最后一层忘记加sigmoid激活。
尴尬！！！不过反映了tensorflow graph的一个好处，可以让我们像看图一样检查模型。。。
今天主要讲下常量，变量和占位符。</p>

<h5>常量</h5>

<pre><code>a = tf.contant([3,6])#表示生成一个长度为2的向量a = [3,6]，此时a是一个op，在sess.run之后才有值
#tf.zeros()
#tf.ones()
#都为常量
######------------------
#tf.random_normal(shape=,dtype=,name=&#39;&#39;)
#tf.random_uniform()
#以上也是常量，只不过是随机常量</code></pre>

<h5>变量</h5>

<pre><code>b = tf.Variable(2,name=&#39;scalar&#39;)#生成一个变量，并为该变量赋初值为2，仍在sess.run()后才有值为2。
#变量在使用之前要初始化！！！初始化变量有三种方式
#1）全部初始化
init = tf.global_variables_initializer()
sess.run(init)
#2)初始化部分变量
init_ab = tf.variables_initializer([a,b],name =&#39;init_ab&#39;)
#3)初始化单个变量
sess.run(b.initializer)
#当然，此时b被初始化后是个Tensor,
print(b)#Tensor(&#39;Variable/....&#39;)
print(b.eval())#[[0.444,0.111,....],...,[...]],使用eval()输出变量内容a</code></pre>

<p>记得常量为一个<code>op</code>,而Variable()是一个类</p>

<h5>占位符placeholder()</h5>

<p><code>a = tf.placeholder(dtype,shape=,name=&#39;&#39;)</code>
占位符就是个容器，先占个坑，里面什么都没有，在<code>run</code>的时候，可以通过
<code>sess.run([a,b],feed_dict={a:a_data,b:b_data})</code>来将值放到之前占的坑里。
一般我们用占位符来存放用于训练的数据，当然我们可以直接用数据来构建<code>op</code>，但是有点外行了。。用<code>placeholder</code>的方式，可以让我们数据送入的更自由，可以按自己需要的batch来送入。</p>

<p>简单总结一下，常量constant()用来构建一些在模型中不需要改变的量，变量Variable()一般用来构建权重等，需要不断更新，占位符placeholder一般用来作数据的容器。</p>
            
            
        </div>
    </div>
    
</div>
<script src="../../assets/js/bootstrap.min.js"></script>
<script src="../../assets/APlayer/dist/APlayer.min.js"></script>
<script src="../../assets/APlayer/demo/demo.js"></script>
<script>
        /*banner 初始化*/
        $(window).load(function() {
         $('#slider').nivoSlider({
            effect: 'random',        // 过渡效果
            controlNav: false,       // 是否显示图片导航控制按钮（,2,3... ）
            pauseOnHover: true,      // 鼠标县浮时是否停止动画
            manualAdvance: false,    // 是否手动切换 
            animSpeed: 100,          // 图片过渡时间   
            pauseTime: 2000,         // 图片显示时间
            pauseOnHover: false,
            manualAdvance: false,
        });
        });
    $(document).ready(function(){
        $('body').show();
        $('.version').text(NProgress.version);
        NProgress.start();
        setTimeout(function() { NProgress.done(); $('.fade').removeClass('out'); }, 1000);
    })
    
</script>
</body>

</html>
